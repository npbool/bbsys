{% load average_tags %}
<div class="table-container">
  <table class="table table-striped table-bordered table-condensed">
    <thead>
    <tr>
      <th rowspan="2">学校</th>
      <th rowspan="2">班级</th>
      {% for subject in subjects %}
        <th colspan="7">{{ subject }}</th>
      {% endfor %}
      <th colspan="3">总分</th>
    </tr>
    <tr>
      {% for subject in subjects %}
        <th>优</th>
        <th>良</th>
        <th>优良</th>
        <th>及格</th>
        <th>均分</th>
        <th>名次</th>
        <th>离差</th>
      {% endfor %}
    <th>名次</th>
    <th>均分</th>
    <th>离差</th>
    </tr>
    </thead>
    <tbody>
      {% for row in data %}
        <tr>
        <td>{{ row|school }}</td>
        <td>{{ row|class_idx }}</td>
        {% for subject in subjects %}
          <td>{{ row|excellent:subject }}</td>
          <td>{{ row|good:subject }}</td>
          <td>{{ row|excellent_and_good:subject }}</td>
          <td>{{ row|pass:subject }}</td>
          <td>{{ row|mean:subject }}</td>
          <td>{{ row|mean_rank:subject }}</td>
          <td>{{ row|mean_diff:subject }}</td>
        {% endfor %}
        <td>{{ row|mean:'总分' }}</td>
        <td>{{ row|mean_rank:'总分' }}</td>
        <td>{{ row|mean_diff:'总分' }}</td>
        </tr>
      {% endfor %}

    </tbody>
  </table>
</div>
